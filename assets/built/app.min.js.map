{"version":3,"sources":["script.js"],"names":["changeLanguage","language","newUrl","document","querySelector","getAttribute","currentPath","window","location","pathname","href","languageSelector","currentDomain","dropdown","getElementById","hostname","startsWith","value","resizeGalleryImages","querySelectorAll","forEach","image","container","closest","width","height","style","flex","menuOpen","addEventListener","body","classList","toggle","LoadMorePagination","setupLightbox","lazyLoadImages","html","darkLight","images","lightboxOverlay","createElement","className","appendChild","styleElement","closeLightbox","remove","overflow","textContent","head","lightboxImage","imageUrl","imageAlt","src","alt","lightboxContent","closeButton","innerHTML","add","event","target","lazyImageObserver","loadedClass","dataSrcAttribute","dataSrcsetAttribute","sourceSelector","lazyImages","slice","call","IntersectionObserver","entries","observer","entry","isIntersecting","lazyImage","hasAttribute","srcset","parentNode","lazySource","removeAttribute","unobserve","observe","hideLoadMoreButton","loadMoreButton","display","handleLoadMoreClick","e","preventDefault","disabled","pagination_next_page_number","pagination_available_pages_number","url","nextPageUrl","split","fetch","then","response","ok","text","data","wrapper","tempDiv","Array","from","element","nextLink","setAttribute","localStorage","setItem","console","log"],"mappings":"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","file":"app.min.js","sourcesContent":["\n\nmenuOpen();\nLoadMorePagination()\n\n// Call the function to start lazy loading\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    setupLightbox();\n    lazyLoadImages();\n    resizeGalleryImages();\n    languageSelector();\n});\n\n// language selector\nfunction changeLanguage(language) {\n  // Get the URL from the selected option's data-url attribute\n  const selectedOption = document.querySelector(`#language-dropdown option[value=\"${language}\"]`);\n  const newUrl = selectedOption.getAttribute('data-url');\n    \n  // Get the current path (everything after the domain)\n  const currentPath = window.location.pathname;\n    \n  // Navigate to the new domain with the current path\n  //console.log('Language Selector:', `${domain}${currentPath}`);\n  window.location.href = `${newUrl}${currentPath}`;\n}\n\n// Set selected language based on current URL\nfunction languageSelector() {\n  // Check if the dropdown exists\n  const dropdown = document.getElementById('language-dropdown');\n  if (!dropdown) return;\n  \n  const currentDomain = window.location.hostname;\n  //console.log('Current Domain:', currentDomain);\n  \n  if (currentDomain.startsWith('en.')) {\n      dropdown.value = 'en';\n  } else if (currentDomain.startsWith('es.')) {\n      dropdown.value = 'es';\n  } else if (currentDomain.startsWith('zh.')) {\n      dropdown.value = 'zh';\n  }\n}\n\n//gallery\nfunction resizeGalleryImages() {\n    var images = document.querySelectorAll('.kg-gallery-image img');\n    images.forEach(function (image) {\n      var container = image.closest('.kg-gallery-image');\n      var width = image.getAttribute('width');\n      var height = image.getAttribute('height');\n      var ratio = width / height;\n      container.style.flex = ratio + ' 1 0%';\n    });\n  }\n\n\n// Toggle the menu open and close when on mobile\nfunction menuOpen() {\n    const burgerButton = document.querySelector('.it-burger');\n    burgerButton.addEventListener('click', function () {\n        document.body.classList.toggle('it-head-open');\n    });\n}\n\n// Dark/Light Mode\n    \nvar html = document.querySelector('html'),\ndarkLight = document.querySelector('.it-dark-light')\ndarkLight.addEventListener('click', function(){\n   if(html.getAttribute('data-theme') === 'light'){\n       html.setAttribute('data-theme', 'dark')\n       localStorage.setItem('selected-theme', 'dark');\n   }else{\n       html.setAttribute('data-theme', 'light')\n       localStorage.setItem('selected-theme', 'light');\n   }\n   console.log(html.hasAttribute('data-theme'))\n})\n\n\n//Light Box\nfunction setupLightbox() {\n    const images = document.querySelectorAll('.kg-image-card .kg-image, .kg-gallery-image img ');\n    const lightboxOverlay = document.createElement('div');\n    lightboxOverlay.className = 'v-lightbox-overlay';\n    document.body.appendChild(lightboxOverlay);\n\n    const styles = `\n    .kg-image-card .kg-image, .kg-gallery-image img {\n      cursor: zoom-in;\n    }\n    .v-lightbox-overlay {\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, 0.8);\n      z-index: 9999;\n      opacity: 0;\n      transition: opacity 0.3s ease, transform 0.3s ease;\n      overflow-y: auto;\n      overscroll-behavior: contain;\n    }\n    \n    .v-lightbox-overlay.show {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      opacity: 1;\n    }\n    \n    .v-lightbox-content {\n      position: relative;\n      max-width: 90%;\n      max-height: 90%;\n      animation: lightbox-fade-in 0.3s ease;\n    }\n    \n    @keyframes lightbox-fade-in {\n      0% {\n        opacity: 0;\n      }\n      100% {\n        opacity: 1;\n      }\n    }\n    \n    .v-lightbox-image {\n      display: block;\n      max-width: 100%;\n      max-height: 100%;\n      margin: 0 auto;\n    }\n    \n    .close-button {\n      position: absolute;\n      top: 10px;\n      right: 10px;\n      color: #fff;\n      font-size: 24px;\n      cursor: pointer;\n    }\n    \n    @media (max-width: 768px) {\n      .v-lightbox-overlay.show {\n        align-items: flex-start;\n      }\n    \n      .v-lightbox-content {\n        width: 90%;\n        max-height: 90vh;\n        animation: lightbox-fade-in 0.3s ease;\n      }\n    }\n    \n    `;\n\n    const styleElement = document.createElement('style');\n    styleElement.textContent = styles;\n    document.head.appendChild(styleElement);\n\n    function openLightbox(imageUrl, imageAlt) {\n      const lightboxImage = document.createElement('img');\n      lightboxImage.className = 'v-lightbox-image';\n      lightboxImage.src = imageUrl;\n      lightboxImage.alt = imageAlt;\n\n      const lightboxContent = document.createElement('div');\n      lightboxContent.className = 'v-lightbox-content';\n      lightboxContent.appendChild(lightboxImage);\n\n      const closeButton = document.createElement('span');\n      closeButton.className = 'close-button';\n      closeButton.innerHTML = '&times;';\n      closeButton.addEventListener('click', closeLightbox);\n      lightboxContent.appendChild(closeButton);\n\n      lightboxOverlay.innerHTML = '';\n      lightboxOverlay.appendChild(lightboxContent);\n      lightboxOverlay.classList.add('show');\n      document.body.style.overflow = 'hidden';\n    }\n\n    function closeLightbox() {\n      lightboxOverlay.classList.remove('show');\n      document.body.style.overflow = '';\n    }\n\n    images.forEach(function(image) {\n      image.addEventListener('click', function() {\n        const imageUrl = image.getAttribute('src');\n        const imageAlt = image.getAttribute('alt');\n        openLightbox(imageUrl, imageAlt);\n      });\n    });\n\n    lightboxOverlay.addEventListener('click', function(event) {\n      if (event.target === lightboxOverlay) {\n        closeLightbox();\n      }\n    });\n}\n\n\n    // Lazy Load (New Lazyload Script)\n    function lazyLoadImages() {\n        var lazyClass = \"lazy\";\n        var loadedClass = \"loaded\";\n        var dataSrcAttribute = \"data-src\";\n        var dataSrcsetAttribute = \"data-srcset\";\n        var sourceSelector = \"source\";\n      \n        var lazyImages = [].slice.call(document.querySelectorAll(\".\" + lazyClass));\n      \n        if (\"IntersectionObserver\" in window) {\n          var lazyImageObserver = new IntersectionObserver(function(entries, observer) {\n            entries.forEach(function(entry) {\n              if (entry.isIntersecting) {\n                var lazyImage = entry.target;\n      \n                // Check if data-src attribute exists before updating attributes\n                if (lazyImage.hasAttribute(dataSrcAttribute)) {\n                  lazyImage.src = lazyImage.getAttribute(dataSrcAttribute);\n                  lazyImage.srcset = lazyImage.getAttribute(dataSrcsetAttribute);\n                  \n                  // Convert sibling source elements\n                  var lazySources = lazyImage.parentNode.querySelectorAll(sourceSelector);\n                  lazySources.forEach(function(lazySource) {\n                    lazySource.srcset = lazySource.getAttribute(dataSrcsetAttribute);\n                    lazySource.removeAttribute(dataSrcsetAttribute);\n                  });\n      \n                  lazyImage.removeAttribute(dataSrcAttribute);\n                  lazyImage.removeAttribute(dataSrcsetAttribute);\n                  lazyImage.classList.add(loadedClass);\n                }\n      \n                lazyImageObserver.unobserve(lazyImage);\n              }\n            });\n          });\n      \n          lazyImages.forEach(function(lazyImage) {\n            lazyImageObserver.observe(lazyImage);\n          });\n        } else {\n          // Fallback for browsers without Intersection Observer\n          lazyImages.forEach(function(lazyImage) {\n            if (lazyImage.hasAttribute(dataSrcAttribute)) {\n              lazyImage.src = lazyImage.getAttribute(dataSrcAttribute);\n              lazyImage.srcset = lazyImage.getAttribute(dataSrcsetAttribute);\n              \n              // Convert sibling source elements\n              var lazySources = lazyImage.parentNode.querySelectorAll(sourceSelector);\n              lazySources.forEach(function(lazySource) {\n                lazySource.srcset = lazySource.getAttribute(dataSrcsetAttribute);\n                lazySource.removeAttribute(dataSrcsetAttribute);\n              });\n      \n              lazyImage.classList.add(loadedClass);\n              lazyImage.removeAttribute(dataSrcAttribute);\n              lazyImage.removeAttribute(dataSrcsetAttribute);\n            }\n          });\n        }\n      }\n\nfunction LoadMorePagination() {\n\n    // Hide the load more button\n    function hideLoadMoreButton() {\n    if (loadMoreButton) {\n        loadMoreButton.style.display = 'none';\n    }\n    }\n\n    // Append HTML elements to a wrapper element\n    function appendElements(wrapper, elements) {\n    elements.forEach(function(element) {\n        wrapper.appendChild(element);\n    });\n    }\n\n    // Update pagination state and button status\n    function updatePaginationState() {\n    pagination_next_page_number++;\n    loadMoreButton.classList.remove('loading');\n    loadMoreButton.disabled = false;\n\n    if (pagination_next_page_number > pagination_available_pages_number) {\n        loadMoreButton.disabled = true;\n    }\n    }\n\n    // Handle click event for the load more button\n    function handleLoadMoreClick(e) {\n    e.preventDefault();\n    loadMoreButton.classList.add('loading');\n    loadMoreButton.disabled = true;\n\n    if (pagination_next_page_number <= pagination_available_pages_number) {\n        var url = nextPageUrl.split(/page/)[0] + 'page/' + pagination_next_page_number + '/';\n        fetch(url)\n        .then(function(response) {\n            if (response.ok) {\n            return response.text();\n            }\n        })\n        .then(function(data) {\n            var tempDiv = document.createElement('div');\n            tempDiv.innerHTML = data;\n            var wrapper = document.querySelector('.it-postfeed');\n            var html = Array.from(tempDiv.querySelectorAll('.post'));\n            appendElements(wrapper, html);\n            updatePaginationState();\n            lazyLoadImages();\n        });\n    }\n    }\n\n    // Main script\n    var nextLink = document.querySelector('link[rel=next]');\n    var nextPageUrl, loadMoreButton, endMessage;\n\n    // Check if there is a next link\n    if (nextLink !== null) {\n    nextPageUrl = nextLink.getAttribute('href');\n    loadMoreButton = document.querySelector('.it-load-posts');\n\n    // Check if the next page URL is undefined\n    if (typeof nextPageUrl === 'undefined') {\n        hideLoadMoreButton();\n    } else {\n        // Attach click event handler to the load more button\n        loadMoreButton.addEventListener('click', handleLoadMoreClick);\n    }\n    } else {\n    var paginationWrap = document.querySelector('.it-pagination');\n    // Hide the load more button if there is no next link and a pagination wrapper is present\n    if (paginationWrap !== null) {\n        hideLoadMoreButton();\n    }\n    }\n}"]}